---
import Navigation from "./Navigation.astro";
import { Image } from "astro:assets";
import Logo from "../assets/Logo AbogadosRCG.png";
---

<header
    class="max-md:grid max-md:grid-cols-3 flex justify-center items-center bg-white shadow-md z-50 fixed w-full h-16 px-10 animate-headerAnimation"
>
    <a href="/" class="group relative inline-block">
        <Image
            loading="eager"
            src={Logo}
            alt="RCG Logo"
            width="220"
            class="!w-40 transition-all group-hover:scale-105 group-hover:brightness-110 group-hover:shadow-[0_0_10px_2px_rgba(0,0,0,.1)]"
        />
    </a>

    <button
        id="menu-toggle"
        class="flex justify-center md:hidden p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-400"
    >
        <svg
            class="w-8 h-8 text-gray-800"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
        >
            <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16m-7 6h7"></path>
        </svg>
    </button>

    <nav
        id="menu"
        class="hidden md:flex justify-center w-full active:flex active:flex-col active:items-center"
    >
        <Navigation />
    </nav>
</header>

<script>
    window.addEventListener("scroll", () => {
        document
            .querySelector("header")
            ?.classList.toggle("scrolled", window.scrollY > 50);
    });

    document.addEventListener("DOMContentLoaded", () => {
        const toggleButton = document.getElementById("menu-toggle");
        const menu = document.getElementById("menu");

        // Toggle al hacer clic en el botón
        toggleButton?.addEventListener("click", (e) => {
            e.stopPropagation(); // evita que se cierre inmediatamente
            menu?.classList.toggle("active");
        });

        // Evita que se cierre si haces clic dentro del menú
        menu?.addEventListener("click", (e) => {
            e.stopPropagation();
        });

        // Cierra el menú si haces clic fuera
        document.addEventListener("click", () => {
            menu?.classList.remove("active");
        });
    });
</script>

<style>
    .scrolled {
        height: 3.5rem;
        margin-top: -5px;
        padding-top: 5px;
        opacity: 0.95;
        transition: all 0.5s ease;
    }
</style>
